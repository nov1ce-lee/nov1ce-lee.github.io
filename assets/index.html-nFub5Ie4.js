import{_ as t,c as n,a as e,e as l,d as i,b as o,r as p,o as d}from"./app-DPuO4jG3.js";const r={};function h(c,s){const a=p("VPIcon");return d(),n("div",null,[s[11]||(s[11]=e("blockquote",null,[e("p",null,"免责声明：本教程仅用于学习丝之歌游戏的代码，请勿用于商业用途")],-1)),s[12]||(s[12]=e("p",null,"本文将主要介绍如何解析游戏的代码",-1)),s[13]||(s[13]=e("hr",null,null,-1)),s[14]||(s[14]=e("h3",{id:"需要用到的工具",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#需要用到的工具"},[e("span",null,"需要用到的工具")])],-1)),s[15]||(s[15]=e("h4",{id:"dnspy",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#dnspy"},[e("span",null,"dnspy")])],-1)),e("p",null,[s[0]||(s[0]=i("这是一个调试器和",-1)),s[1]||(s[1]=e("code",null,".NET",-1)),s[2]||(s[2]=i("汇编编辑器，即使没有源代码，也可以用它来编辑和调试",-1)),s[3]||(s[3]=e("code",null,".NET",-1)),s[4]||(s[4]=i("和",-1)),s[5]||(s[5]=e("code",null,"Unity",-1)),s[6]||(s[6]=i("汇编",-1)),s[7]||(s[7]=e("br",null,null,-1)),s[8]||(s[8]=i(" 如何下载：访问",-1)),o(a,{provider:"iconify",name:"mdi:github"}),s[9]||(s[9]=e("a",{href:"https://github.com/dnSpy/dnSpy",target:"_blank",rel:"noopener noreferrer"},"dnspy的GitHub仓库",-1)),s[10]||(s[10]=i("，下载对应系统的release版本(已经归档很久了，但是仍然可以使用)",-1))]),s[16]||(s[16]=l(`<hr><h3 id="解析游戏代码" tabindex="-1"><a class="header-anchor" href="#解析游戏代码"><span>解析游戏代码</span></a></h3><h4 id="解析步骤" tabindex="-1"><a class="header-anchor" href="#解析步骤"><span>解析步骤</span></a></h4><ol><li><p>解压下载的<code>dnspy</code>压缩包，启动<code>dnspy.exe</code>程序</p></li><li><p>使用Steam浏览本地文件的功能，打开游戏安装目录<code>Steam\\steamapps\\common\\Hollow Knight Silksong</code>，并进入<code>\\Hollow Knight Silksong_Data\\Managed</code>文件夹，找到<code>Assembly-CSharp.dll</code>文件</p></li><li><p>在<code>dnspy</code>中打开<code>Assembly-CSharp.dll</code>文件 <img src="https://pic-1326566629.cos.ap-shanghai.myqcloud.com/notes/1c0f3a3bf9.png" alt="" loading="lazy"><img src="https://pic-1326566629.cos.ap-shanghai.myqcloud.com/notes/b075ecd3f2.png" alt="" loading="lazy"></p></li><li><p>可以点击 <code>{}-</code> 查看主要的内容，此时已经可以随意浏览代码了 <img src="https://pic-1326566629.cos.ap-shanghai.myqcloud.com/notes/976a2d028e.png" alt="" loading="lazy"></p></li><li><p>快捷键<code>Ctrl+Shift+K</code>，打开搜索框，如搜索<code>playerdata</code>，可以找到<code>PlayerData</code>类，这个类存储了玩家存档数据的字段，也包含了很多对应的方法 <img src="https://pic-1326566629.cos.ap-shanghai.myqcloud.com/notes/2777e77e89.png" alt="" loading="lazy"></p></li><li><p>快捷键<code>Ctrl+Shift+R</code>，对变量或方法进行分析，可以获取其上游调用者和下游被调用者的信息，如获取<code>PlayerData</code>类中<code>maxHealthBase</code>字段的上下游 <img src="https://pic-1326566629.cos.ap-shanghai.myqcloud.com/notes/7cf56a9d4c.png" alt="" loading="lazy"></p></li></ol><hr><h4 id="具体示例" tabindex="-1"><a class="header-anchor" href="#具体示例"><span>具体示例</span></a></h4><p>我们借助上面的示例，分析一下<code>maxHealthBase</code>字段</p><div class="language-c# line-numbers-mode" data-highlighter="shiki" data-ext="c#" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-c#"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">/* 获取最大生命值字段 */</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;">DefaultValue</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">5</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)]</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">public</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> int</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> maxHealthBase</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以看到其下有个调用方法<code>PlayerData.CountGameCompletion()</code>，这个方法会用于统计玩家存档的完成度<br> 我们可以双击方法直接跳转至具体调用位置，查看是如何根据<code>maxHealthBase</code>字段来计算完成度的</p><div class="language-c# line-numbers-mode" data-highlighter="shiki" data-ext="c#" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-c#"><span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">this</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">completionPercentage</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> +=</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">float</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)(</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">this</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">maxHealthBase</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>可以看到，这个字段的计算方式是<code>this.maxHealthBase - 5</code>，从而获取面具收集数量，用以更新游戏完成度<br> 每一个完整收集的面具会增加一个血量上限，也就是<code>maxHealthBase</code>字段的值会增加 1</p><p>仿照这个方式，我们可以继续寻找其他字段的具体分析，也可以根据<code>PlayerData.CountGameCompletion()</code>方法来分析其他字段的完成度是如何统计的</p>`,12))])}const g=t(r,[["render",h]]),k=JSON.parse('{"path":"/notes/games/silk_song/code_parse/","title":"代码解析","lang":"zh-CN","frontmatter":{"title":"代码解析","createTime":"2026/01/12 23:28:06","permalink":"/notes/games/silk_song/code_parse/","description":"免责声明：本教程仅用于学习丝之歌游戏的代码，请勿用于商业用途 本文将主要介绍如何解析游戏的代码 需要用到的工具 dnspy 这是一个调试器和.NET汇编编辑器，即使没有源代码，也可以用它来编辑和调试.NET和Unity汇编 如何下载：访问 解析游戏代码 解析步骤 解压下载的dnspy压缩包，启动dnspy.exe程序 使用Steam浏览本地文件的功能，...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"代码解析\\",\\"image\\":[\\"https://pic-1326566629.cos.ap-shanghai.myqcloud.com/notes/1c0f3a3bf9.png\\",\\"https://pic-1326566629.cos.ap-shanghai.myqcloud.com/notes/b075ecd3f2.png\\",\\"https://pic-1326566629.cos.ap-shanghai.myqcloud.com/notes/976a2d028e.png\\",\\"https://pic-1326566629.cos.ap-shanghai.myqcloud.com/notes/2777e77e89.png\\",\\"https://pic-1326566629.cos.ap-shanghai.myqcloud.com/notes/7cf56a9d4c.png\\"],\\"dateModified\\":\\"2026-02-13T06:53:57.000Z\\",\\"author\\":[]}"],["meta",{"property":"og:url","content":"https://nov1ce-lee.github.io/notes/games/silk_song/code_parse/"}],["meta",{"property":"og:site_name","content":"novice.log"}],["meta",{"property":"og:title","content":"代码解析"}],["meta",{"property":"og:description","content":"免责声明：本教程仅用于学习丝之歌游戏的代码，请勿用于商业用途 本文将主要介绍如何解析游戏的代码 需要用到的工具 dnspy 这是一个调试器和.NET汇编编辑器，即使没有源代码，也可以用它来编辑和调试.NET和Unity汇编 如何下载：访问 解析游戏代码 解析步骤 解压下载的dnspy压缩包，启动dnspy.exe程序 使用Steam浏览本地文件的功能，..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://pic-1326566629.cos.ap-shanghai.myqcloud.com/notes/1c0f3a3bf9.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2026-02-13T06:53:57.000Z"}],["meta",{"property":"article:modified_time","content":"2026-02-13T06:53:57.000Z"}]]},"readingTime":{"minutes":1.95,"words":584},"git":{"createdTime":1768236660000,"updatedTime":1770965637000,"contributors":[{"name":"nov1ce","username":"nov1ce","email":"289836737@qq.com","commits":1,"avatar":"https://avatars.githubusercontent.com/nov1ce?v=4","url":"https://github.com/nov1ce"},{"name":"novice","username":"novice","email":"289836737@qq.com","commits":8,"avatar":"https://avatars.githubusercontent.com/novice?v=4","url":"https://github.com/novice"}]},"autoDesc":true,"filePathRelative":"notes/game/空洞骑士系列/2.丝之歌/1.游戏解析/1.代码解析.md","headers":[]}');export{g as comp,k as data};
