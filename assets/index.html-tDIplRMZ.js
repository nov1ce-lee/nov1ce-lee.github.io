import{_ as a,c as n,a as i,e as l,d as s,b as o,r as p,o as d}from"./app-B6rSt3_j.js";const r="/blog_images/20260113002009569.png",h="/blog_images/20260113002232786.png",g="/blog_images/20260113002921912.png",m="/blog_images/20260113002612634.png",c="/blog_images/20260113003736295.png",k={};function y(u,e){const t=p("VPIcon");return d(),n("div",null,[e[11]||(e[11]=i("blockquote",null,[i("p",null,"免责声明：本教程仅用于学习丝之歌游戏的代码，请勿用于商业用途")],-1)),e[12]||(e[12]=i("p",null,"本文将主要介绍如何解析游戏的代码",-1)),e[13]||(e[13]=i("hr",null,null,-1)),e[14]||(e[14]=i("h3",{id:"需要用到的工具",tabindex:"-1"},[i("a",{class:"header-anchor",href:"#需要用到的工具"},[i("span",null,"需要用到的工具")])],-1)),e[15]||(e[15]=i("h4",{id:"dnspy",tabindex:"-1"},[i("a",{class:"header-anchor",href:"#dnspy"},[i("span",null,"dnspy")])],-1)),i("p",null,[e[0]||(e[0]=s("这是一个调试器和",-1)),e[1]||(e[1]=i("code",null,".NET",-1)),e[2]||(e[2]=s("汇编编辑器，即使没有源代码，也可以用它来编辑和调试",-1)),e[3]||(e[3]=i("code",null,".NET",-1)),e[4]||(e[4]=s("和",-1)),e[5]||(e[5]=i("code",null,"Unity",-1)),e[6]||(e[6]=s("汇编",-1)),e[7]||(e[7]=i("br",null,null,-1)),e[8]||(e[8]=s(" 如何下载：访问",-1)),o(t,{provider:"iconify",name:"mdi:github"}),e[9]||(e[9]=i("a",{href:"https://github.com/dnSpy/dnSpy",target:"_blank",rel:"noopener noreferrer"},"dnspy的GitHub仓库",-1)),e[10]||(e[10]=s("，下载对应系统的release版本(已经归档很久了，但是仍然可以使用)",-1))]),e[16]||(e[16]=l('<hr><h3 id="解析游戏代码" tabindex="-1"><a class="header-anchor" href="#解析游戏代码"><span>解析游戏代码</span></a></h3><h4 id="解析步骤" tabindex="-1"><a class="header-anchor" href="#解析步骤"><span>解析步骤</span></a></h4><ol><li><p>解压下载的<code>dnspy</code>压缩包，启动<code>dnspy.exe</code>程序</p></li><li><p>使用Steam浏览本地文件的功能，打开游戏安装目录<code>Steam\\steamapps\\common\\Hollow Knight Silksong</code>，并进入<code>\\Hollow Knight Silksong_Data\\Managed</code>文件夹，找到<code>Assembly-CSharp.dll</code>文件</p></li><li><p>在<code>dnspy</code>中打开<code>Assembly-CSharp.dll</code>文件 <img src="'+r+'" alt="" loading="lazy" width="909" height="489"><img src="'+h+'" alt="" loading="lazy" width="1076" height="606"></p></li><li><p>可以点击 <code>{}-</code> 查看主要的内容，此时已经可以随意浏览代码了 <img src="'+g+'" alt="" loading="lazy" width="543" height="281"></p></li><li><p>快捷键<code>Ctrl+Shift+K</code>，打开搜索框，如搜索<code>playerdata</code>，可以找到<code>PlayerData</code>类，这个类存储了玩家存档数据的字段，也包含了很多对应的方法 <img src="'+m+'" alt="" loading="lazy" width="1030" height="436"></p></li><li><p>快捷键<code>Ctrl+Shift+R</code>，对变量或方法进行分析，可以获取其上游调用者和下游被调用者的信息，如获取<code>PlayerData</code>类中<code>maxHealthBase</code>字段的上下游 <img src="'+c+`" alt="" loading="lazy" width="722" height="457"></p></li></ol><hr><h4 id="具体示例" tabindex="-1"><a class="header-anchor" href="#具体示例"><span>具体示例</span></a></h4><p>我们借助上面的示例，分析一下<code>maxHealthBase</code>字段</p><div class="language-c# line-numbers-mode" data-highlighter="shiki" data-ext="c#" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-c#"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">/* 获取最大生命值字段 */</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;">DefaultValue</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">5</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)]</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">public</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> int</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> maxHealthBase</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以看到其下有个调用方法<code>PlayerData.CountGameCompletion()</code>，这个方法会用于统计玩家存档的完成度<br> 我们可以双击方法直接跳转至具体调用位置，查看是如何根据<code>maxHealthBase</code>字段来计算完成度的</p><div class="language-c# line-numbers-mode" data-highlighter="shiki" data-ext="c#" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-c#"><span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">this</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">completionPercentage</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> +=</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">float</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)(</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">this</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">maxHealthBase</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>可以看到，这个字段的计算方式是<code>this.maxHealthBase - 5</code>，从而获取面具收集数量，用以更新游戏完成度<br> 每一个完整收集的面具会增加一个血量上限，也就是<code>maxHealthBase</code>字段的值会增加 1</p><p>仿照这个方式，我们可以继续寻找其他字段的具体分析，也可以根据<code>PlayerData.CountGameCompletion()</code>方法来分析其他字段的完成度是如何统计的</p>`,12))])}const v=a(k,[["render",y]]),f=JSON.parse('{"path":"/notes/games/silk_song/code_parse/","title":"代码解析","lang":"zh-CN","frontmatter":{"title":"代码解析","createTime":"2026/01/12 23:28:06","permalink":"/notes/games/silk_song/code_parse/","description":"免责声明：本教程仅用于学习丝之歌游戏的代码，请勿用于商业用途 本文将主要介绍如何解析游戏的代码 需要用到的工具 dnspy 这是一个调试器和.NET汇编编辑器，即使没有源代码，也可以用它来编辑和调试.NET和Unity汇编 如何下载：访问 解析游戏代码 解析步骤 解压下载的dnspy压缩包，启动dnspy.exe程序 使用Steam浏览本地文件的功能，...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"代码解析\\",\\"image\\":[\\"https://nov1ce-lee.github.io/blog_images/20260113002009569.png\\",\\"https://nov1ce-lee.github.io/blog_images/20260113002232786.png\\",\\"https://nov1ce-lee.github.io/blog_images/20260113002921912.png\\",\\"https://nov1ce-lee.github.io/blog_images/20260113002612634.png\\",\\"https://nov1ce-lee.github.io/blog_images/20260113003736295.png\\"],\\"dateModified\\":\\"2026-01-21T09:51:57.000Z\\",\\"author\\":[]}"],["meta",{"property":"og:url","content":"https://nov1ce-lee.github.io/notes/games/silk_song/code_parse/"}],["meta",{"property":"og:site_name","content":"novice.log"}],["meta",{"property":"og:title","content":"代码解析"}],["meta",{"property":"og:description","content":"免责声明：本教程仅用于学习丝之歌游戏的代码，请勿用于商业用途 本文将主要介绍如何解析游戏的代码 需要用到的工具 dnspy 这是一个调试器和.NET汇编编辑器，即使没有源代码，也可以用它来编辑和调试.NET和Unity汇编 如何下载：访问 解析游戏代码 解析步骤 解压下载的dnspy压缩包，启动dnspy.exe程序 使用Steam浏览本地文件的功能，..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://nov1ce-lee.github.io/blog_images/20260113002009569.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2026-01-21T09:51:57.000Z"}],["meta",{"property":"article:modified_time","content":"2026-01-21T09:51:57.000Z"}]]},"readingTime":{"minutes":1.9,"words":569},"git":{"createdTime":1768236660000,"updatedTime":1768989117000,"contributors":[{"name":"nov1ce","username":"nov1ce","email":"289836737@qq.com","commits":1,"avatar":"https://avatars.githubusercontent.com/nov1ce?v=4","url":"https://github.com/nov1ce"},{"name":"novice","username":"novice","email":"289836737@qq.com","commits":7,"avatar":"https://avatars.githubusercontent.com/novice?v=4","url":"https://github.com/novice"}]},"autoDesc":true,"filePathRelative":"notes/game/空洞骑士系列/2.丝之歌/1.游戏解析/1.代码解析.md","headers":[]}');export{v as comp,f as data};
